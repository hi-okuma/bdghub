<!DOCTYPE html>
<html>
    <head>
        <title>ボドゲハブ(仮) : 0000.DB設計</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">ボドゲハブ(仮)</a></span>
                            </li>
                                                    <li>
                                <span><a href="59408651.html">ボードゲームハブ(仮) Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="59506689.html">1.開発</a></span>
                            </li>
                                                    <li>
                                <span><a href="59506796.html">0000.本体</a></span>
                            </li>
                                                    <li>
                                <span><a href="59605011.html">0000.設計</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ボドゲハブ(仮) : 0000.DB設計
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> 大熊浩也</span>, last modified on 5月 04, 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="id-0000.DB設計-rooms/{roomId}"><style>[data-colorid=yfsqazh2x9]{color:#ff5630} html[data-color-mode=dark] [data-colorid=yfsqazh2x9]{color:#cf2600}[data-colorid=zis719c8o7]{color:#ff5630} html[data-color-mode=dark] [data-colorid=zis719c8o7]{color:#cf2600}[data-colorid=bl2dbms1l1]{color:#ff5630} html[data-color-mode=dark] [data-colorid=bl2dbms1l1]{color:#cf2600}[data-colorid=dhc8byvhk4]{color:#36b37e} html[data-color-mode=dark] [data-colorid=dhc8byvhk4]{color:#4cc994}[data-colorid=lw8dtwuewh]{color:#ff5630} html[data-color-mode=dark] [data-colorid=lw8dtwuewh]{color:#cf2600}[data-colorid=gl1yr0odfk]{color:#36b37e} html[data-color-mode=dark] [data-colorid=gl1yr0odfk]{color:#4cc994}</style>rooms/{roomId}</h2><p>部屋情報</p><p>※roomIdはFunctionsで生成。部屋コードとしても使用し、人が入力しやすいように８文字とする。</p><div class="table-wrap"><table data-table-width="1800" data-layout="center" data-local-id="e54f5a82-76e5-4ad6-8dae-aa6a24641347" class="confluenceTable"><colgroup><col style="width: 287.0px;" /><col style="width: 225.0px;" /><col style="width: 780.0px;" /><col style="width: 508.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Field</strong></p></th><th class="confluenceTh"><p><strong>Type</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Initial State</strong></p></th></tr><tr><td class="confluenceTd"><p>roomStatus</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>部屋の状態</p><p>accepting：部屋作成〜ゲーム開始、またはゲームとゲームの間（参加可能）<br />inProgress：ゲーム中（参加不可）<br />full：参加人数上限に達した（参加不可）<br />closed：部屋から誰もいなくなった時、x時間ゲーム開始しなかった時（参加不可）</p></td><td class="confluenceTd"><p>accepting</p></td></tr><tr><td class="confluenceTd"><p>players</p></td><td class="confluenceTd"><p>list (string)</p></td><td class="confluenceTd"><p>ニックネームを格納</p></td><td class="confluenceTd"><p>（部屋作成者のニックネームのみ）</p></td></tr><tr><td class="confluenceTd"><p>hostPlayer</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>ホストプレイヤーのニックネーム<br />※ホストプレイヤーが退出した場合は残っているプレイヤーの中で割り当て</p></td><td class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>currentGame</p></td><td class="confluenceTd"><p>subcorrection</p></td><td class="confluenceTd"><p><a href="https://hiokumatech.atlassian.net/wiki/spaces/bodoge/pages/59670529/0000.DB#rooms%2F%7Broom_id%7D%2Fcurrent_game" rel="nofollow">こちらを参照</a><br />※statusが&rdquo;inProgress&rdquo;以外ならnull</p></td><td class="confluenceTd"><p>null</p></td></tr><tr><td class="confluenceTd"><p>createdAt</p></td><td class="confluenceTd"><p>timestamp</p></td><td class="confluenceTd"><p>部屋コレクションの作成日</p></td><td class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>updatedAt</p></td><td class="confluenceTd"><p>timestamp</p></td><td class="confluenceTd"><p>部屋コレクションの更新日</p></td><td class="confluenceTd"><p>-</p></td></tr></tbody></table></div><p>※statusの状態遷移図</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250416-135554.png" width="555" loading="lazy" src="attachments/59670529/60391472.png?width=555" data-image-src="attachments/59670529/60391472.png" data-height="99" data-width="315" data-unresolved-comment-count="0" data-linked-resource-id="60391472" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250416-135554.png" data-base-url="https://hiokumatech.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59670529" data-linked-resource-container-version="54" data-media-id="f4e06e92-a6b0-4397-8e0c-e332109d705b" data-media-type="file" /></span><h2 id="id-0000.DB設計-rooms/{roomId}/currentGame/{gameId}">rooms/{roomId}/currentGame/{gameId}</h2><p>現在遊んでいるゲームに関するデータ。</p><p>詳細は各ゲームのDB設計ページで定義。</p><h2 id="id-0000.DB設計-games/{gameId}">games/{gameId}</h2><p>ゲーム毎の情報</p><p>※運用側で手動で用意するコレクション（gameIdは0001からインクリ）</p><p>※favoriteCntはMVPスコープ外</p><div class="table-wrap"><table data-table-width="1800" data-layout="center" data-local-id="a657072e-9481-4be6-8a6c-6b2d3ee3409c" class="confluenceTable"><colgroup><col style="width: 314.0px;" /><col style="width: 256.0px;" /><col style="width: 943.0px;" /><col style="width: 287.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Field</strong></p></th><th class="confluenceTh"><p><strong>Type</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Initial State</strong></p></th></tr><tr><td class="confluenceTd"><p>title</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>ゲームタイトル</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>overview</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>一覧画面に表示する概要文</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>description</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>詳細画面に表示する説明・ルール</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>duration</p></td><td class="confluenceTd"><p>number</p></td><td class="confluenceTd"><p>ゲームの所要時間（分）</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>minPlayers</p></td><td class="confluenceTd"><p>number</p></td><td class="confluenceTd"><p>推奨人数の最小値</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>maxPlayers</p></td><td class="confluenceTd"><p>number</p></td><td class="confluenceTd"><p>推奨人数の最大値</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>tags</p></td><td class="confluenceTd"><p>list</p></td><td class="confluenceTd"><p><a href="https://hiokumatech.atlassian.net/wiki/spaces/bodoge/pages/59670529/0000.DB#tags%2F%7Btag_id%7D" rel="nofollow">こちらを参照</a>（tagIdのリスト）</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>creatorName</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>開発者名、開発会社名</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>thumbnailUrl</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>サムネイル画像のURL</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td data-highlight-colour="#b3bac5" class="confluenceTd"><p>favoriteCnt</p></td><td data-highlight-colour="#b3bac5" class="confluenceTd"><p>number</p></td><td data-highlight-colour="#b3bac5" class="confluenceTd"><p>いいね数</p></td><td data-highlight-colour="#b3bac5" class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p>playCnt</p></td><td class="confluenceTd"><p>number</p></td><td class="confluenceTd"><p>遊ばれた回数</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p>releaseDate</p></td><td class="confluenceTd"><p>timestamp</p></td><td class="confluenceTd"><p>公開日</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>version</p></td><td class="confluenceTd"><p><span data-colorid="gl1yr0odfk">string?</span></p></td><td class="confluenceTd"><p>セマンティックバージョン</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>0.1.0</p></td></tr><tr><td class="confluenceTd"><p>isPublished</p></td><td class="confluenceTd"><p>boolean</p></td><td class="confluenceTd"><p>公開状態</p><p>true: 公開　false: 非公開</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>false</p></td></tr><tr><td class="confluenceTd"><p><span data-colorid="lw8dtwuewh">assets</span></p></td><td class="confluenceTd"><p><span data-colorid="bl2dbms1l1">subcollection</span></p></td><td class="confluenceTd"><p><span data-colorid="zis719c8o7">頻繁な更新は不要のデータ（詳細は各ゲームのDB設計ページに記載）</span></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><span data-colorid="yfsqazh2x9">-</span></p></td></tr></tbody></table></div><p /><h2 id="id-0000.DB設計-players/{playerId}"><span style="background-color: rgb(220,223,228);">players/{playerId}</span></h2><p><span style="background-color: rgb(220,223,228);">※MVPではない。ログイン機能や課金機能を実装したタイミングで用意する。</span></p><h2 id="id-0000.DB設計-tags/{tagId}">tags/{tagId}</h2><p>※タグ名の変更に耐えられるようにコレクションを用意<br />※運用側で手動で用意する</p><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="b9fcd233-b629-48e6-83ed-ee30560410ee" class="confluenceTable"><colgroup><col style="width: 131.0px;" /><col style="width: 107.0px;" /><col style="width: 394.0px;" /><col style="width: 120.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Field</strong></p></th><th class="confluenceTh"><p><strong>Type</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Initial State</strong></p></th></tr><tr><td class="confluenceTd"><p>name</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>タグ名</p></td><td class="confluenceTd"><p>-</p></td></tr></tbody></table></div><p /><h2 id="id-0000.DB設計-serviceConfig/global">serviceConfig/global</h2><div class="table-wrap"><table data-table-width="1106" data-layout="center" data-local-id="7c4aad7b-c358-40af-95ae-b3ed5eb5bdc9" class="confluenceTable"><colgroup><col style="width: 194.0px;" /><col style="width: 157.0px;" /><col style="width: 579.0px;" /><col style="width: 176.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Field</strong></p></th><th class="confluenceTh"><p><strong>Type</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Initial State</strong></p></th></tr><tr><td class="confluenceTd"><p>maxPlayersPerRoom</p></td><td class="confluenceTd"><p>number</p></td><td class="confluenceTd"><p>１部屋あたりの最大プレイヤー数</p></td><td class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>idleTimeoutMinutes</p></td><td class="confluenceTd"><p>number</p></td><td class="confluenceTd"><p>部屋のアイドルタイムアウト時間（分）</p></td><td class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>maintenance</p></td><td class="confluenceTd"><p>map</p></td><td class="confluenceTd"><p><a href="https://hiokumatech.atlassian.net/wiki/spaces/bodoge/pages/59670529/0000.DB#serviceConfig%2Fglobal%2Fmaintenance" rel="nofollow">詳細はこちら</a></p></td><td class="confluenceTd"><p>-</p></td></tr><tr><td class="confluenceTd"><p>version</p></td><td class="confluenceTd"><p><span data-colorid="dhc8byvhk4">string?</span></p></td><td class="confluenceTd"><p>セマンティックバージョン</p></td><td class="confluenceTd"><p>-</p></td></tr></tbody></table></div><h2 id="id-0000.DB設計-serviceConfig/global/maintenance">serviceConfig/global/maintenance</h2><div class="table-wrap"><table data-table-width="1106" data-layout="center" data-local-id="eafd779a-ca29-4798-afab-fb344b1789f6" class="confluenceTable"><colgroup><col style="width: 194.0px;" /><col style="width: 157.0px;" /><col style="width: 579.0px;" /><col style="width: 176.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Field</strong></p></th><th class="confluenceTh"><p><strong>Type</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Initial State</strong></p></th></tr><tr><td class="confluenceTd"><p>isMaintenance</p></td><td class="confluenceTd"><p>boolean</p></td><td class="confluenceTd"><p>true: メンテナンス中</p></td><td class="confluenceTd"><p>false</p></td></tr><tr><td class="confluenceTd"><p>maintenanceMessage</p></td><td class="confluenceTd"><p>string</p></td><td class="confluenceTd"><p>メンテ中ダイアログに表示する内容</p></td><td class="confluenceTd"><p>-</p></td></tr></tbody></table></div><p />
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59670529/59670543.png">image-20240824-141332.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59670529/59670546.wsd">ER図.wsd</a> (application/octet-stream)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59670529/60391452.png">image-20250416-133519.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59670529/60391472.png">image-20250416-135554.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on 5月 07, 2025 23:01</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
